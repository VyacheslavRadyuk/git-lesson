<aura:component controller="RegistrationOfTripsController" implements="flexipage:availableForRecordHome,force:hasRecordId" access="global">    
    <aura:attribute name="data" type="List" access="public"/>
    <aura:attribute name="columns" type="List" access="public"/>
    <aura:attribute name="recordId" type="Id" access="public"/>
    <aura:attribute name="trip" type="Trip__c" access="public"/>
    <aura:attribute name="selectedRows" type="List" access="public"/>
    <aura:attribute name="selectedTourists" type="List" access="public"/>
    <aura:attribute name="isSpinner" type="boolean" default="false" access="public"/>
    <aura:attribute name="today" type="Date" access="public"/>
    <aura:attribute name="showConfirmWindow" type="boolean" default="false" access="public"/>
    <aura:attribute name="showDatatable" type="boolean" default="false" access="public"/>  
        
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler name="eventButtonNo" event="c:EventButtonNo" action="{!c.confirmDialogNo}"/>
    <aura:handler name="eventButtonYes" event="c:EventButtonYes" action="{!c.confirmDialogYes}"/>
    
    <force:recordData aura:id="tripRecordId" recordId="{!v.recordId}" targetFields="{!v.trip}" layoutType="FULL"
                      recordUpdated="{!c.showTripsDatatable}"/>
    
    <lightning:layout> 
        <lightning:layoutItem size="6">
            <lightning:card iconName="standard:contact" title="{!$Label.c.titlePotentialTouristDatatable}">     
                <aura:if isTrue="{!v.showDatatable}">
                    <div class="slds-p-around_large" style="height:250px;">
                        <lightning:datatable aura:id="touristTable"
                                             keyField="id"
                                             recordId="{!v.recordId}"
                                             data="{!v.data}"
                                             columns="{!v.columns}"
                                             onrowselection="{!c.doSelectRecord}"
                                             />  
                        
                        <div class="slds-m-top_small">
                            <lightning:button variant="brand" label="{!$Label.c.buttonLabelAddToTrip}" onclick="{!c.handleClick}"/>     
                        </div>
                    </div>
                </aura:if>
                
                <div class="slds-m-around--xx-large">
                    <aura:if isTrue="{!v.isSpinner}">
                        <lightning:spinner variant="brand" size="large"/>
                    </aura:if>
                </div>
                
                <aura:if isTrue="{!v.showConfirmWindow}">
                    <c:ConfirmationWindow />       
                </aura:if>
            </lightning:card>
        </lightning:layoutItem>
    </lightning:layout>  
</aura:component>